# üé® Guide des Messages et Couleurs - GearSwap Tetsouo

## üéØ Guide d'Usage des Wrappers

### Architecture du Syst√®me

Le syst√®me de messages et couleurs de GearSwap Tetsouo utilise une architecture √† double wrapper pour garantir la coh√©rence visuelle et la maintenabilit√©.

```text
üìÅ assets/ffxi_colors.json  ‚Üê‚îÄ‚îÄ Source de v√©rit√© des couleurs FFXI
    ‚Üì
üìÅ utils/colors.lua         ‚Üê‚îÄ‚îÄ Wrapper standardis√©  
üìÅ utils/messages.lua       ‚Üê‚îÄ‚îÄ Wrapper universel
    ‚Üì
üìÅ jobs/*/                  ‚Üê‚îÄ‚îÄ Utilisation dans les jobs
```

---

## üåà Syst√®me de Couleurs Centralis√©

### Fichier Source : `assets/ffxi_colors.json`

#### Couleurs Principales Disponibles

| Code  | Nom             | Hex     | Usage Recommand√©      |
| ----- | --------------- | ------- | --------------------- |
| `001` | Blanc           | #ffffff | Information g√©n√©rale  |
| `005` | Cyan Brillant   | #63ffff | Magie/sorts           |
| `030` | Vert Brillant   | #25ff59 | Succ√®s                |
| `050` | Jaune Brillant  | #ffff77 | Job Abilities         |
| `057` | Orange Brillant | #ff7f5a | Avertissements        |
| `160` | Gris-Violet     | #9d9cd2 | Texte secondaire      |
| `167` | Rouge-Rose      | #ff6096 | Erreurs/Weapon Skills |
| `207` | Bleu Clair      | #99b5ff | Information bleue     |

#### Mapping par Type d'Action

```json
"action_types": {
  "magic": {"suggested_colors": ["005", "056", "006"]},
  "weaponskill": {"suggested_colors": ["167", "028"]},
  "jobability": {"suggested_colors": ["050", "057"]},
  "success": {"suggested_colors": ["030"]},
  "error": {"suggested_colors": ["167", "028"]},
  "warning": {"suggested_colors": ["057"]},
  "info": {"suggested_colors": ["001", "037", "166"]}
}
```

---

## üõ†Ô∏è Wrappers Disponibles

### 1. `utils/colors.lua` - Syst√®me Standardis√©

#### Palette Principale

```lua
Colors.PALETTE = {
    SUCCESS = 030,    -- Vert (succ√®s)
    ERROR = 167,      -- Rouge-rose (erreurs) 
    WARNING = 057,    -- Orange (avertissements)
    INFO = 050,       -- Jaune (information)
    HEADER = 160,     -- Gris-violet (headers)
    HIGHLIGHT = 005,  -- Cyan (highlight)
}
```

#### Fonctions d'Affichage

```lua
-- Headers standardis√©s
Colors.show_header("TITRE")
Colors.show_footer()

-- Messages de status
Colors.show_status("Message", "success")  -- ou "error", "warning"

-- Entr√©es de donn√©es
Colors.show_entry("Label", "Valeur")
Colors.show_category("Cat√©gorie")

-- Couleurs dynamiques
local color = Colors.get_performance_color(85)  -- Bas√© sur %
local color = Colors.get_time_color(12)         -- Bas√© sur temps ms
```

### 2. `utils/messages.lua` - Syst√®me Universel

#### Couleurs Standardis√©es

```lua
MessageUtils.STANDARD_COLORS = {
    MAGIC = 005,         -- Cyan (sorts)
    ABILITY = 050,       -- Jaune (job abilities)
    WEAPONSKILL = 167,   -- Rouge-rose (weapon skills)
    SUCCESS = 030,       -- Vert (succ√®s)
    ERROR = 167,         -- Rouge (erreurs)
    WARNING = 057,       -- Orange (avertissements)
}
```

#### Fonction Universelle

```lua
MessageUtils.universal_message(job, action_type, message, details, status, time_value, force_color)
```

**Param√®tres :**

- `job` : "WAR", "BLM", etc.
- `action_type` : "Magic", "Ability", "WeaponSkill", "Status"
- `message` : Message principal
- `details` : D√©tails optionnels
- `status` : "Active", "Recast", "Ready"
- `time_value` : Temps en secondes
- `force_color` : Code couleur forc√©

---

## üìã Fonctions Sp√©cialis√©es par Job

### Messages BLM

```lua
local MessageUtils = require('utils/messages')

-- Messages de synchronisation
MessageUtils.blm_sync_message('light', 'Fire')
MessageUtils.blm_sync_message('dark', 'Stone')

-- Messages de cast alternatif
MessageUtils.blm_alt_cast_message('cast_light', 'Fire', 'VI')
MessageUtils.blm_alt_cast_message('error_light')
```

### Messages BST

```lua
-- Erreur de resources
MessageUtils.bst_resource_error_message()

-- Messages de cooldown
MessageUtils.bst_cooldown_message('Reward', 45)
```

### Messages BRD

```lua
-- Messages g√©n√©riques BRD
MessageUtils.brd_message("Setting", "Song Type", "March")
MessageUtils.brd_message("Weapon", "Main Weapon", "Carnwenhan")
```

### Messages Syst√®me (Tous Jobs)

```lua
-- Actions syst√®me
MessageUtils.system_action_message('Starting equipment test...')

-- Statistiques
MessageUtils.system_stats_message('Cache Statistics', {
    items = 29000,
    hit_rate = "99.8%"
})
```

---

## üö´ R√®gles de Conformit√©

### ‚úÖ √Ä FAIRE

1. **Toujours utiliser les wrappers**

   ```lua
   local MessageUtils = require('utils/messages')
   MessageUtils.system_action_message('Mon message')
   ```

2. **R√©f√©rencer les couleurs par leur nom JSON**

   ```lua
   -- Bon
   local Colors = require('utils/colors')
   windower.add_to_chat(Colors.PALETTE.SUCCESS, message)
   ```

3. **Utiliser les fonctions sp√©cialis√©es**

   ```lua
   -- Pour BLM
   MessageUtils.blm_sync_message('light', newValue)
   
   -- Pour BST  
   MessageUtils.bst_cooldown_message(spell.name, recast)
   ```

### ‚ùå √Ä √âVITER

1. **Usage direct d'add_to_chat avec couleurs cod√©es**

   ```lua
   -- √âviter
   windower.add_to_chat(167, "Message d'erreur")
   
   -- Pr√©f√©rer
   Colors.show_status("Message d'erreur", "error")
   ```

2. **Couleurs "magiques" cod√©es en dur**

   ```lua
   -- √âviter
   add_to_chat(050, msg)  -- Que signifie 050 ?
   
   -- Pr√©f√©rer  
   MessageUtils.system_action_message(msg)  -- Couleur automatique
   ```

---

## üîß Exemples d'Impl√©mentation

### Exemple Job Complet

```lua
-- Dans Tetsouo_XXX.lua
function self_command(command)
    local MessageUtils = require('utils/messages')
    
    if command == 'test' then
        -- Message d'action syst√®me
        MessageUtils.system_action_message('Executing GearSwap module tests...')
        
        -- Simulation de statistiques
        local stats = {
            modules_loaded = 12,
            cache_size = "29,000+",
            hit_rate = "99.8%"
        }
        MessageUtils.system_stats_message('Test Results', stats)
        
    elseif command:startswith('altlight') then
        -- Message sp√©cialis√© BLM
        if job == 'BLM' then
            MessageUtils.blm_alt_cast_message('cast_light', 'Fire', 'VI')
        end
        
    end
end
```

### Exemple Module Syst√®me

```lua
-- Dans core/xxxx.lua
function show_equipment_report()
    local Colors = require('utils/colors')
    
    -- Header standardis√©
    Colors.show_header("EQUIPMENT REPORT")
    
    -- Cat√©gories
    Colors.show_category("Missing Items")
    Colors.show_entry("Head", "Adhemar Bonnet +1", Colors.PALETTE.ERROR)
    Colors.show_entry("Body", "Adhemar Jacket +1", Colors.PALETTE.SUCCESS)
    
    -- Status final
    Colors.show_status("Report completed successfully", "success")
    Colors.show_footer()
end
```

---

## üìä Conformit√© et Validation

### Auto-Audit

Pour v√©rifier la conformit√© de votre code :

1. **Rechercher les usages directs**

   ```bash
   grep -r "windower\.add_to_chat" jobs/
   grep -r "add_to_chat([0-9]" jobs/
   ```

2. **V√©rifier les imports**

   ```bash
   grep -r "require.*messages" jobs/
   grep -r "MessageUtils\." jobs/
   ```

### Standards de Qualit√©

- ‚úÖ 0 usage direct d'`add_to_chat` dans les jobs
- ‚úÖ 0 couleur cod√©e en dur (valeurs num√©riques)
- ‚úÖ Utilisation syst√©matique des wrappers
- ‚úÖ Fonctions sp√©cialis√©es pour chaque job
- ‚úÖ Coh√©rence avec `assets/ffxi_colors.json`

---

## üéØ Conclusion

Le syst√®me de messages et couleurs de GearSwap Tetsouo garantit :

- **Coh√©rence Visuelle** : Couleurs FFXI officielles
- **Maintenabilit√©** : Centralisation des couleurs
- **Facilit√© d'Usage** : Wrappers sp√©cialis√©s
- **Qualit√© Professionnelle** : 95% de conformit√©

### Pour Nouveaux Jobs

1. Importer le wrapper : `local MessageUtils = require('utils/messages')`
2. Utiliser les fonctions sp√©cialis√©es existantes
3. Cr√©er de nouvelles fonctions sp√©cialis√©es si n√©cessaire
4. Respecter la palette de couleurs centralis√©e

---

*Guide cr√©√© pour GearSwap Tetsouo v2.0.0*  
*Bas√© sur le rapport de conformit√© du 2025-08-18*
